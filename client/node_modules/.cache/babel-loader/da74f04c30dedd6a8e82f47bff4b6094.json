{"ast":null,"code":"var _jsxFileName = \"/Users/brianmacpherson/Desktop/Bon/client/src/components/dropdown/dropdown-controller.component.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Controller extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEntryKey = event => {\n      if (event.which === 13) {\n        this.animateOut();\n      }\n    };\n\n    this.setPositition = rect => {\n      this.setState({\n        triggerRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    };\n\n    this.animateOut = event => {\n      this.setState({\n        animateOut: true\n      });\n      setTimeout(() => {\n        this.setState({\n          show: false,\n          animateOut: false\n        });\n      }, 400);\n    };\n\n    this.toggle = () => {\n      const show = this.state.show;\n\n      if (show) {\n        this.animateOut();\n      } else {\n        this.setState({\n          show: !this.state.show,\n          animateOut: false\n        });\n      }\n    };\n\n    this.state = {\n      show: false,\n      animateOut: false,\n      triggerRect: {\n        x: '',\n        y: '',\n        width: '',\n        height: ''\n      }\n    };\n  }\n\n  componentDidUpdate() {\n    setTimeout(() => {\n      if (this.state.show) {\n        window.addEventListener('click', this.animateOut);\n        window.addEventListener('keydown', this.handleEntryKey);\n      } else {\n        window.removeEventListener('click', this.animateOut);\n        window.removeEventListener('keydown', this.handleEntryKey);\n      }\n    }, 0);\n  }\n\n  render() {\n    const children = this.props.children;\n    const _this$state = this.state,\n          show = _this$state.show,\n          triggerRect = _this$state.triggerRect,\n          animateOut = _this$state.animateOut;\n    const childrenWithProps = React.Children.map(children, (child, i) => {\n      if (i === 0) {\n        return React.cloneElement(child, {\n          toggle: this.toggle,\n          setPositition: this.setPositition\n        });\n      } else {\n        if (show) {\n          return ReactDOM.createPortal(React.createElement(\"span\", {\n            className: \"compound-span\",\n            onClick: event => event.stopPropagation(),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            },\n            __self: this\n          }, React.cloneElement(child, {\n            toggle: this.toggle,\n            show: show,\n            triggerRect: triggerRect,\n            animateOut: animateOut\n          })), document.body);\n        }\n      }\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, childrenWithProps);\n  }\n\n}\n\nexport default Controller;","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/Bon/client/src/components/dropdown/dropdown-controller.component.js"],"names":["React","Component","ReactDOM","Controller","constructor","props","handleEntryKey","event","which","animateOut","setPositition","rect","setState","triggerRect","x","y","width","height","setTimeout","show","toggle","state","componentDidUpdate","window","addEventListener","removeEventListener","render","children","childrenWithProps","Children","map","child","i","cloneElement","createPortal","stopPropagation","document","body"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Controller extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\tanimateOut: false,\n\t\t\ttriggerRect: {\n\t\t\t\tx: '',\n\t\t\t\ty: '',\n\t\t\t\twidth: '',\n\t\t\t\theight: ''\n\t\t\t},\n\t\t}\n\t}\n\n\tcomponentDidUpdate(){\n\t\tsetTimeout(() => {\n\t\t  if(this.state.show){\n\t\t    window.addEventListener('click', this.animateOut)\n\t\t    window.addEventListener('keydown', this.handleEntryKey)\n\t\t  } else {\n\t\t    window.removeEventListener('click', this.animateOut)\n\t\t    window.removeEventListener('keydown', this.handleEntryKey)\n\t\t  }\n\t\t}, 0)\n\t}\n\n\thandleEntryKey = (event) => {\n\t\tif (event.which === 13) {\n\t\t\tthis.animateOut()\n\t\t}\n\t}\n\n\tsetPositition = (rect) => {\n\t\tthis.setState({\n\t\t\ttriggerRect: {\n\t\t\t\tx: rect.x,\n\t\t\t\ty: rect.y,\n\t\t\t\twidth: rect.width,\n\t\t\t\theight: rect.height,\n\t\t\t}\n\t\t})\n\t}\n\n\tanimateOut = (event) => {\n\t\tthis.setState({\n\t\t\tanimateOut: true,\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({\n\t\t\tshow: false,\n\t\t\tanimateOut: false,\n\t\t})\n\t\t}, 400)\n\t}\n\n\ttoggle = () => {\n\t\tconst { show } = this.state;\n\t\tif (show) {\n\t\t\tthis.animateOut()\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshow: !this.state.show,\n\t\t\t\tanimateOut: false,\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children  } = this.props;\n\t\tconst { show, triggerRect, animateOut } = this.state;\n\n\t\tconst childrenWithProps = React.Children.map(children, (child, i) => {\n\t\t    if (i === 0) {\n\t\t      \t return React.cloneElement(child, { toggle: this.toggle, setPositition: this.setPositition })\n\t\t    } else {\n\t\t      \tif (show) {\n\t\t      \t\treturn ReactDOM.createPortal(\n\t\t\t            <span className='compound-span' onClick={event => event.stopPropagation()}>\n\t\t\t\t            {React.cloneElement(child, { toggle: this.toggle, show: show, triggerRect: triggerRect, animateOut: animateOut })}\n\t\t\t\t        </span>\n\t\t\t\t        , document.body\n\t\t\t        )\n\t\t      \t}\n\t\t    }\n\t    });\n\n\n\t    return (\n\t    \t<div>\n\t\t    \t{childrenWithProps}\n\t    \t</div>\n\t    );\n\t}\n}\nexport default Controller;"]},"metadata":{},"sourceType":"module"}